<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avaliação Técnica - Estágio TI</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f0f2f5; display: flex; justify-content: center; padding: 20px; }
        #quiz-container { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); width: 100%; max-width: 650px; }
        .timer { font-weight: bold; color: #d9534f; font-size: 1.2em; margin-bottom: 20px; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        .question { font-size: 1.2em; margin-bottom: 20px; color: #333; line-height: 1.4; }
        .options button { display: block; width: 100%; padding: 15px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; text-align: left; background: #fff; transition: all 0.2s; font-size: 1em; }
        .options button:hover { background: #e9ecef; border-color: #bbb; }
        .hidden { display: none; }
        #results { text-align: center; line-height: 1.8; }
        .progress { font-size: 0.9em; color: #666; margin-bottom: 10px; }
        .btn-download { background-color: #28a745; color: white; border: none; padding: 15px 25px; border-radius: 8px; font-size: 1em; cursor: pointer; margin-top: 20px; font-weight: bold; }
        .btn-download:hover { background-color: #218838; }
    </style>
</head>
<body>

<div id="quiz-container">
    <div class="progress" id="progress-display">Pergunta 1 de 30</div>
    <div id="timer-display" class="timer">Tempo restante: 60s</div>
    
    <div id="question-content">
        <div id="question-text" class="question"></div>
        <div id="options-container" class="options"></div>
    </div>

    <div id="results" class="hidden">
        <h2>Avaliação Finalizada</h2>
        <div id="score-summary" style="font-size: 1.3em;"></div>
        <button class="btn-download" onclick="downloadResults()">Baixar Relatório de Desempenho (.txt)</button>
    </div>
</div>

<script>
    const questions = [
        { q: "(HTML) Qual tag é a mais adequada para definir o título principal de uma página (SEO)?", o: ["<header>", "<title>", "<h1>", "<b>"], a: 2 },
        { q: "(HTML) Qual atributo é usado para descrever uma imagem para leitores de tela?", o: ["title", "alt", "src", "longdesc"], a: 1 },
        { q: "(HTML) Qual tag cria uma lista com marcadores (não numerada)?", o: ["<ol>", "<ul>", "<li>", "<list>"], a: 1 },
        { q: "(HTML) Como abrir um link em uma aba em branco?", o: ["target='_new'", "target='_blank'", "rel='external'", "mode='new'"], a: 1 },
        { q: "(HTML) Onde ficam os metadados (como o conjunto de caracteres UTF-8)?", o: ["<body>", "<footer>", "<meta-container>", "<head>"], a: 3 },
        { q: "(CSS) Qual propriedade cria um espaçamento INTERNO (entre o conteúdo e a borda)?", o: ["margin", "border-spacing", "padding", "gap"], a: 2 },
        { q: "(CSS) Como selecionar todos os parágrafos dentro de uma div no CSS?", o: ["div > p", "div p", ".div .p", "div+p"], a: 1 },
        { q: "(CSS) Qual propriedade define a cor do texto?", o: ["font-color", "text-style", "color", "background-text"], a: 2 },
        { q: "(CSS) Qual valor de 'display' ativa o modelo de layout Flexbox?", o: ["grid", "inline-block", "flex", "block"], a: 2 },
        { q: "(CSS) A unidade 'rem' é baseada em quê?", o: ["No tamanho do elemento pai", "No tamanho da viewport", "No tamanho da fonte do elemento raiz (html)", "No tamanho da tela"], a: 2 },
        { q: "(Lógica) Se x = 10. Após a operação x = x + 5, qual o valor final de x?", o: ["5", "10", "15", "20"], a: 2 },
        { q: "(Lógica) Qual estrutura de controle é usada para repetir um código enquanto uma condição for verdadeira?", o: ["if/else", "while", "switch", "array.push()"], a: 1 },
        { q: "(Lógica) O que acontece ao tentar acessar o índice [5] de um array que só tem 3 itens?", o: ["Retorna erro ou undefined", "O array cresce sozinho", "Retorna o último item", "O programa reinicia"], a: 0 },
        { q: "(Lógica) Analise a expressão: (10 > 5) E (5 < 2). O resultado é:", o: ["Verdadeiro", "Falso", "Erro de sintaxe", "Depende da linguagem"], a: 1 },
        { q: "(Lógica) Qual o resultado da operação '10 % 3' (resto da divisão)?", o: ["3", "3.33", "1", "0"], a: 2 },
        { q: "(Matemática) Qual o resultado de 15 + 5 * 2?", o: ["40", "20", "25", "30"], a: 2 },
        { q: "(Matemática) Na base binária, qual número decimal representa o valor '10'?", o: ["Um", "Dois", "Dez", "Zero"], a: 1 },
        { q: "(Matemática) Qual o resultado lógico da inversão de (Falso OU Verdadeiro)?", o: ["Verdadeiro", "Falso", "Nulo", "Erro"], a: 1 },
        { q: "(Matemática) Uma função que cresce exponencialmente:", o: ["Cresce de forma constante", "Cresce cada vez mais rápido", "Diminui com o tempo", "É uma linha reta"], a: 1 },
        { q: "(Matemática) Um conjunto de 8 bits forma:", o: ["1 Megabyte", "1 Kilobyte", "1 Byte", "1 Nibble"], a: 2 },
        { q: "(Decisão) Você terminou a tarefa antes do prazo. Qual a melhor atitude?", o: ["Aguardar o fim do expediente em silêncio", "Informar o gestor e se colocar à disposição", "Ir embora sem avisar", "Alterar o código de outros colegas"], a: 1 },
        { q: "(Decisão) Encontrou um erro no código que não sabe resolver. O que faz?", o: ["Apaga o erro e finge que não viu", "Chuta soluções", "Pesquisa e, se não resolver, pede ajuda explicando o que tentou", "Para de trabalhar"], a: 2 },
        { q: "(Decisão) Cliente pede alteração direta para você via chat. Como agir?", o: ["Faz na hora", "Diz que não sabe fazer", "Avisa que recebeu e repassa ao gestor para validar", "Ignora a mensagem"], a: 2 },
        { q: "(Decisão) Você percebe que vai atrasar uma entrega. O que faz?", o: ["Dá uma desculpa no dia seguinte", "Avisa o gestor antecipadamente e alinha um novo prazo", "Trabalha virado sem avisar ninguém", "Desliga o celular"], a: 1 },
        { q: "(Decisão) Enviou sem querer uma senha de banco para o GitHub da empresa:", o: ["Deixa lá", "Avisa o responsável técnico imediatamente e troca a senha", "Tenta apagar só no seu PC", "Não faz nada"], a: 1 },
        { q: "(Git) Como 'baixar' um repositório da internet pela primeira vez?", o: ["git push", "git commit", "git clone", "git download"], a: 2 },
        { q: "(Git) Qual comando salva alterações locais com uma mensagem?", o: ["git save", "git commit -m 'msg'", "git send", "git add"], a: 1 },
        { q: "(Git) Como enviamos os commits para o servidor remoto?", o: ["git pull", "git push", "git remote", "git upload"], a: 1 },
        { q: "(Git) Para que serve uma 'Branch'?", o: ["Deletar código", "Criar linha separada de desenvolvimento", "Conectar internet", "Instalar libs"], a: 1 },
        { q: "(Git) Qual comando traz as atualizações do servidor?", o: ["git pull", "git fetch --all", "git update", "git status"], a: 0 }
    ];

    let currentQuestion = 0;
    let score = 0;
    let timeLeft = 60;
    let timer;
    let userLogs = [];
    let startTime;

    function startTimer() {
        timeLeft = 60;
        startTime = Date.now();
        document.getElementById('timer-display').innerText = `Tempo restante: ${timeLeft}s`;
        timer = setInterval(() => {
            timeLeft--;
            document.getElementById('timer-display').innerText = `Tempo restante: ${timeLeft}s`;
            if (timeLeft <= 0) {
                logResponse("TEMPO ESGOTADO", false, 60);
                nextQuestion();
            }
        }, 1000);
    }

    function logResponse(selectedText, isCorrect, timeSpent) {
        userLogs.push({
            pergunta: questions[currentQuestion].q,
            respostaDada: selectedText,
            correta: isCorrect ? "SIM" : "NÃO",
            tempo: timeSpent + "s"
        });
    }

    function showQuestion() {
        if (currentQuestion >= questions.length) {
            showResults();
            return;
        }
        clearInterval(timer);
        startTimer();
        
        document.getElementById('progress-display').innerText = `Pergunta ${currentQuestion + 1} de ${questions.length}`;
        const q = questions[currentQuestion];
        document.getElementById('question-text').innerText = q.q;
        const optionsDiv = document.getElementById('options-container');
        optionsDiv.innerHTML = '';
        
        q.o.forEach((opt, index) => {
            const btn = document.createElement('button');
            btn.innerText = opt;
            btn.onclick = () => { 
                const timeSpent = Math.round((Date.now() - startTime) / 1000);
                const isCorrect = (index === q.a);
                if (isCorrect) score++;
                logResponse(opt, isCorrect, timeSpent);
                nextQuestion(); 
            };
            optionsDiv.appendChild(btn);
        });
    }

    function nextQuestion() {
        currentQuestion++;
        showQuestion();
    }

    function showResults() {
        clearInterval(timer);
        document.getElementById('question-content').classList.add('hidden');
        document.getElementById('timer-display').classList.add('hidden');
        document.getElementById('progress-display').classList.add('hidden');
        document.getElementById('results').classList.remove('hidden');
        
        const perc = (score / questions.length) * 100;
        document.getElementById('score-summary').innerHTML = `
            <p>Acertos: <strong>${score} de ${questions.length}</strong></p>
            <p>Desempenho: <strong>${perc.toFixed(1)}%</strong></p>
        `;
    }

    function downloadResults() {
        let text = `RELATÓRIO DE AVALIAÇÃO TÉCNICA\n`;
        text += `====================================\n`;
        text += `Resultado Final: ${score} de ${questions.length}\n`;
        text += `Aproveitamento: ${(score/questions.length*100).toFixed(1)}%\n`;
        text += `Data: ${new Date().toLocaleString()}\n`;
        text += `====================================\n\n`;
        
        userLogs.forEach((log, i) => {
            text += `Questão ${i+1}: ${log.pergunta}\n`;
            text += `Resposta: ${log.respostaDada}\n`;
            text += `Acertou: ${log.correta}\n`;
            text += `Tempo: ${log.tempo}\n`;
            text += `------------------------------------\n`;
        });

        const blob = new Blob([text], { type: 'text/plain' });
        const anchor = document.createElement('a');
        anchor.download = 'resultado_teste_tecnico.txt';
        anchor.href = (window.webkitURL || window.URL).createObjectURL(blob);
        anchor.click();
    }

    showQuestion();
</script>
</body>
</html>
